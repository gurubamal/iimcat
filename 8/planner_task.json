{
  "task": "Update ./run_without_api.sh using the full content of RUN_WITHOUT_API.md and docs/swing_screener_extraction_guide.md. Align outputs, flags, provider messaging, strict-context env vars, and result filenames; propose a precise patch to update run_without_api.sh accordingly.",
  "context": {
    "target_file": "run_without_api.sh",
    "run_without_api.sh": "#!/bin/bash\n# Run AI analysis WITHOUT API keys using CLI bridges (codex or claude)\n# Supports: codex (heuristic - free), claude (Claude CLI - requires login)\n\nset -e\n\n# Parse provider argument (default to codex)\nPROVIDER=\"${1:-codex}\"\nTICKERS_FILE=\"${2:-all.txt}\"\nHOURS_BACK=\"${3:-48}\"\nMAX_ARTICLES=\"${4:-10}\"\n\n# Normalize provider name\nPROVIDER=$(echo \"$PROVIDER\" | tr '[:upper:]' '[:lower:]')\n\necho \"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\"\necho \"üÜì Running AI Analysis WITHOUT API Keys\"\necho \"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\"\necho \"\"\n\n# Configure based on provider\nif [ \"$PROVIDER\" = \"claude\" ]; then\n    echo \"Method: Claude CLI Bridge\"\n    echo \"Cost: FREE with Claude subscription\"\n    echo \"Speed: ~5s per analysis\"\n    echo \"Accuracy: ~95% (best for final rankings)\"\n    echo \"\"\n\n    # Check if claude CLI is available\n    if ! command -v claude &> /dev/null; then\n        echo \"‚ùå ERROR: 'claude' CLI not found!\"\n        echo \"\"\n        echo \"Please install Claude Code:\"\n        echo \"  npm install -g @anthropic-ai/claude-code\"\n        echo \"\"\n        echo \"Or set up authentication:\"\n        echo \"  claude setup-token\"\n        exit 1\n    fi\n\n    # Set up Claude CLI bridge\n    export CLAUDE_SHELL_CMD=\"python3 claude_cli_bridge.py\"\n    export AI_PROVIDER=claude\n    PROVIDER_DISPLAY=\"Claude CLI Bridge\"\n\nelif [ \"$PROVIDER\" = \"gemini\" ]; then\n    echo \"Method: Gemini Agent Bridge\"\n    echo \"Cost: FREE\"\n    echo \"Speed: ~5s per analysis\"\n    echo \"Accuracy: ~80% (dependent on search results)\"\n    echo \"\"\n\n    # Set up gemini agent bridge\n    export GEMINI_SHELL_CMD=\"python3 gemini_agent_bridge.py\"\n    export AI_PROVIDER=gemini\n    PROVIDER_DISPLAY=\"Gemini Agent Bridge\"\n\nelif [ \"$PROVIDER\" = \"codex\" ]; then\n    echo \"Method: Codex Bridge (Calibrated Heuristic)\"\n    echo \"Cost: FREE\"\n    echo \"Speed: Instant\"\n    echo \"Accuracy: High on credible sources (v2 heuristic)\"\n    echo \"\"\n\n    # Set up codex bridge (uses heuristic, no API needed)\n    export CODEX_SHELL_CMD=\"python3 codex_bridge.py\"\n    export AI_PROVIDER=codex\n    PROVIDER_DISPLAY=\"Codex Bridge (Calibrated Heuristic)\"\n\nelse\n    echo \"‚ùå ERROR: Unknown provider '$PROVIDER'\"\n    echo \"\"\n    echo \"Usage: $0 <provider> [tickers_file] [hours_back] [max_articles]\"\n    echo \"\"\n    echo \"Providers:\"\n    echo \"  codex  - Heuristic analysis (free, instant, ~60% accuracy)\"\n    echo \"  claude - Claude CLI analysis (requires Claude subscription, ~95% accuracy)\"\n    echo \"  gemini - Gemini analysis using Google Search (free, ~80% accuracy)\"\n    echo \"\"\n    echo \"Examples:\"\n    echo \"  $0 codex all.txt 48 10\"\n    echo \"  $0 claude nifty50.txt 24 5\"\n    echo \"  $0 gemini nifty50.txt 24 5\"\n    exit 1\nfi\n\necho \"Configuration:\"\necho \"  Provider: $PROVIDER_DISPLAY\"\necho \"  Tickers: $TICKERS_FILE\"\necho \"  Hours: $HOURS_BACK\"\necho \"  Max Articles: $MAX_ARTICLES\"\necho \"  Ticker Validation: DISABLED (all tickers will be processed)\"\necho \"  Popularity/Ad Filter: ENABLED (tunable via AD_POPULARITY_ENABLED/AD_STRICT_REJECT)\"\necho \"\"\necho \"Starting analysis...\"\necho \"  Tip: export MIN_CERTAINTY_THRESHOLD=35 to widen candidates (optional)\"\necho \"\"\n\n# Enforce strict real-time grounding for all providers to avoid reliance on training data\nexport AI_STRICT_CONTEXT=1\nexport NEWS_STRICT_CONTEXT=1\nexport EXIT_STRICT_CONTEXT=1\n\n# Run analysis (with ticker validation disabled for speed)\npython3 realtime_ai_news_analyzer.py \\\n  --tickers-file \"$TICKERS_FILE\" \\\n  --hours-back \"$HOURS_BACK\" \\\n  --max-articles \"$MAX_ARTICLES\" \\\n  --ai-provider \"$AI_PROVIDER\" \\\n  --verify-internet \\\n  --probe-agent \\\n  --disable-ticker-validation\n\necho \"\"\necho \"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\"\necho \"‚úÖ Analysis Complete!\"\necho \"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\"\necho \"\"\necho \"Results: realtime_ai_rankings.csv\"\necho \"\"\nif [ \"$PROVIDER\" = \"codex\" ]; then\n    echo \"To try Claude CLI:\"\n    echo \"  $0 claude $TICKERS_FILE $HOURS_BACK $MAX_ARTICLES\"\n    echo \"\"\n    echo \"Or use API mode (requires API key):\"\n    echo \"  export ANTHROPIC_API_KEY='sk-ant-xxxxx'\"\n    echo \"  ./run_with_claude.sh\"\nfi\n",
    "RUN_WITHOUT_API.md": "# Run Without API Keys ‚Äî `run_without_api.sh`\n\nThis script runs the real‚Äëtime news analysis pipeline without requiring any paid AI API keys. It wires the analyzer to local ‚Äúbridge‚Äù CLIs or a fast heuristic, so you can screen news and rank tickers for opportunities at zero cost.\n\n## What It Does\n- Selects an AI provider that does not need API keys: `codex` (heuristic), `claude` (Claude Code CLI), or `gemini` (Gemini agent bridge).\n- Exports the correct bridge command via environment variables and enforces strict real‚Äëtime grounding.\n- Calls `realtime_ai_news_analyzer.py` with sensible defaults to fetch articles and score them live.\n- Produces a timestamped CSV of AI‚Äëscored opportunities, and a convenience copy as `realtime_ai_results.csv`.\n\n## File\n- `run_without_api.sh`\n\n## Supported Providers\n- `codex` (default): Calibrated heuristic via `codex_bridge.py`. Free, instant, no keys.\n- `claude`: Uses Anthropic‚Äôs Claude Code CLI via `claude_cli_bridge.py`. Requires the `claude` CLI but no API key.\n- `gemini`: Uses a local Gemini agent bridge via `gemini_agent_bridge.py`. Free, relies on search quality.\n\n## Prerequisites\n- Python 3.9+ and project dependencies: `pip install -r requirements.txt`\n- For Claude CLI provider:\n  - Install the CLI: `npm install -g @anthropic-ai/claude-code`\n  - Set up the token: `claude setup-token`\n- For Gemini provider: no API key required; script uses the local bridge `gemini_agent_bridge.py`.\n\n## Usage\n- Syntax: `./run_without_api.sh <provider> [tickers_file] [hours_back] [max_articles]`\n- Defaults: `provider=codex`, `tickers_file=all.txt`, `hours_back=48`, `max_articles=10`\n\nExamples\n- Heuristic (fastest): `./run_without_api.sh codex all.txt 48 10`\n- Claude CLI bridge: `./run_without_api.sh claude nifty50.txt 24 5`\n- Gemini bridge: `./run_without_api.sh gemini nifty50.txt 24 5`\n\n## What the Script Exports\nTo ensure analysis is grounded in real‚Äëtime inputs and uses the chosen bridge, the script sets:\n- `AI_STRICT_CONTEXT=1`, `NEWS_STRICT_CONTEXT=1`, `EXIT_STRICT_CONTEXT=1` ‚Äî force real‚Äëtime grounding and avoid training‚Äëdata leakage.\n- Provider‚Äëspecific bridge variables (auto‚Äëset based on `provider` argument):\n  - Claude CLI: `CLAUDE_SHELL_CMD=\"python3 claude_cli_bridge.py\"`, `AI_PROVIDER=claude`\n  - Gemini: `GEMINI_SHELL_CMD=\"python3 gemini_agent_bridge.py\"`, `AI_PROVIDER=gemini`\n  - Codex heuristic: `CODEX_SHELL_CMD=\"python3 codex_bridge.py\"`, `AI_PROVIDER=codex`\n\n## Analyzer Invocation\nThe script invokes:\n\n`python3 realtime_ai_news_analyzer.py \\\n  --tickers-file <tickers_file> \\\n  --hours-back <hours_back> \\\n  --max-articles <max_articles> \\\n  --ai-provider <claude|gemini|codex> \\\n  --verify-internet \\\n  --probe-agent \\\n  --disable-ticker-validation`\n\nKey flags\n- `--verify-internet`: Checks general connectivity and AI endpoint reachability.\n- `--probe-agent`: For shell bridges, asks the agent to fetch a known URL and verifies a content hash.\n- `--disable-ticker-validation`: Skips exchange symbol validation for speed; all tickers in the file are processed.\n\nInput tickers\n- Provide one symbol per line in `<tickers_file>` (e.g., `all.txt`). The analyzer normalizes symbols (e.g., strips trailing `.NS`).\n\n## Outputs\n- Primary output: a timestamped CSV written by the analyzer (e.g., `realtime_ai_results_YYYY-MM-DD_HH-MM-SS_<provider>.csv`).\n- Convenience copy: `realtime_ai_results.csv` is also written by the analyzer for quick access.\n- Rejected items (when present): `realtime_ai_results_rejected.csv`.\n\nNote: Some older docs and scripts refer to `realtime_ai_rankings.csv`. The analyzer‚Äôs default convenience filename is `realtime_ai_results.csv`.\n\n## Optional Environment Tweaks\n- `MIN_CERTAINTY_THRESHOLD` ‚Äî default 40. Lower to widen candidates.\n  - Example: `export MIN_CERTAINTY_THRESHOLD=35`\n- `AD_POPULARITY_ENABLED` ‚Äî default 1. Enables advertorial/popularity filtering.\n- `AD_STRICT_REJECT` ‚Äî default 0. If `1`, rejects likely advertorials aggressively.\n- `ALLOW_OFFLINE_NEWS_CACHE` ‚Äî default 0. If `1`, uses `offline_news_cache.json` as a fallback when no live news.\n- `AGENT_PROBE_URL` ‚Äî URL used by `--probe-agent` for validation (default `https://example.com/`).\n\n## Provider Notes\n- codex\n  - Pros: free, instant, offline‚Äëfriendly; Cons: heuristic accuracy (60‚Äì70%).\n- claude\n  - Requires the `claude` CLI but no API key. Good accuracy (~90%+), ~5s per analysis depending on article fetch.\n- gemini\n  - Free via local agent bridge; accuracy depends on search quality and article content availability.\n\n## Quick Start\n1) Ensure dependencies: `pip install -r requirements.txt`\n2) Choose a provider:\n   - Heuristic: `./run_without_api.sh codex all.txt 48 10`\n   - Claude CLI: `npm i -g @anthropic-ai/claude-code && claude setup-token && ./run_without_api.sh claude all.txt 48 10`\n   - Gemini: `./run_without_api.sh gemini all.txt 48 10`\n3) Open the results: `realtime_ai_results.csv` (or the timestamped CSV the analyzer prints).\n\n## Troubleshooting\n- ‚Äúclaude: command not found‚Äù\n  - Install and set up: `npm install -g @anthropic-ai/claude-code` then `claude setup-token`.\n- No output file found\n  - Check analyzer logs for the timestamped filename. A convenience copy is written as `realtime_ai_results.csv`.\n- Connectivity checks fail\n  - Disable agent probing (`--probe-agent` is on by default in the script) or set `ALLOW_OFFLINE_NEWS_CACHE=1` for cached runs.\n- Missing Python packages\n  - Run `pip install -r requirements.txt`.\n\n## How It Fits Together\n- The shell script chooses the bridge and sets environment.\n- `realtime_ai_news_analyzer.py` detects the provider and routes prompts to the shell bridge, ensuring responses are valid JSON.\n- Analysis is strictly grounded in fetched article content and real‚Äëtime market data; training‚Äëdata memory is explicitly disabled via strict context flags.\n\n",
    "docs/swing_screener_extraction_guide.md": "# Swing Screener Extraction Guide\n\nThis guide documents the most effective, self‚Äëcontained components to extract from `swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py` and how to assemble them into a robust swing‚Äëtrading setup to rank stocks.\n\nScope: Data quality, indicators, swing signals, scoring/tiering, entry/risk, batching and performance.\n\nNote: File/line references below point to the current repository version and may shift with edits.\n\n\n## Why These Components\n\n- Quality‚Äëfirst pipeline avoids corrupted indicators (corporate actions/outliers).\n- Vectorized indicators and fast swing signals scale well on watchlists.\n- Clear, additive scoring and tiers make ranking explainable and tunable.\n- Caching + batched I/O reduce latency and flakiness.\n\n\n## Minimal Pipeline (Recommended)\n\n1) Fetch + Clean\n- Get and validate history with winsorization (cap returns/volume once, rebuild series):\n  - `YFinanceDataValidator.safe_ticker_history` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:1677)\n  - `apply_adaptive_winsorization` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:1766)\n  - `align_to_nse_trading_calendar` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2031)\n\n2) Compute Core Indicators (correct implementations)\n- RSI (Wilder), Bollinger position (0‚Äì100), ATR (Wilder):\n  - `rsi14` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2708)\n  - `bollinger_band_position` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2740)\n  - `average_true_range` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2770)\n- Or the single‚Äëpass vectorized engine:\n  - `VectorizedIndicators.calculate_all_indicators` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:257)\n\n3) Apply Quality Filters\n- Liquidity, price floor, recency:\n  - `apply_quality_filters` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2453)\n\n4) Signals (optional but high impact)\n- Fast reversal from highs/lows:\n  - `calculate_swing_reversal_signals_fast` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3708)\n- Robust reversal (uses capped data):\n  - `calculate_swing_reversal_signals` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:4820)\n\n5) Score + Tier (Ranking)\n- Indicator‚Äëbased opportunity score with clear breakdown:\n  - `calculate_opportunity_score` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2494)\n    - Tier rules: Tier1 ‚â• 25, Tier2 ‚â• 15, else Watch\n- Lightweight blended score (indicators + swing signal):\n  - `calculate_basic_score_fast` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3740)\n\n6) Entry & Risk (deployment)\n- Simple long signal + ATR SL/TP:\n  - `generate_trading_signals` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3075)\n  - `calculate_signal_confidence` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3155)\n- Tiered ATR entries/stops:\n  - `EntryStrategy` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:9041)\n\n7) Batch Orchestration + Performance\n- Screen multiple tickers concurrently:\n  - `batch_screen_tickers` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2665)\n- Optimized history + TTL cache:\n  - `get_history_optimized` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3636)\n  - `EnhancedCacheManager` (swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3544)\n\n\n## What To Extract (Most Effective Subset)\n\n- Data Quality\n  - `apply_adaptive_winsorization` (cap once ‚Üí rebuild), `get_robust_price_data`, `validate_winsorization_quality`, `align_to_nse_trading_calendar`.\n  - Benefit: Prevents outliers from corrupting RSI/BB/ATR; stable signals.\n\n- Indicators\n  - `rsi14`, `bollinger_band_position`, `average_true_range`, and/or `VectorizedIndicators.calculate_all_indicators` for EMA20/50 slope, volume ratio, RR, S/R.\n\n- Filters\n  - `apply_quality_filters` (avg/recent volume, price floor, min bars).\n\n- Signals\n  - `calculate_swing_reversal_signals_fast` (lightweight) or `calculate_swing_reversal_signals` (robust).\n\n- Scoring + Tiering\n  - `calculate_opportunity_score` as primary ranking (clear thresholds; explainable), or `calculate_basic_score_fast` for compact scoring.\n\n- Entry/Risk\n  - `generate_trading_signals` for simple deployment logic; `EntryStrategy` for consistent ATR stops/entries.\n\n- Batch + Perf\n  - `batch_screen_tickers`, `get_history_optimized`, `EnhancedCacheManager` for scale.\n\n\n## Scoring Details (Out‚Äëof‚Äëthe‚ÄëBox)\n\n- `calculate_opportunity_score` (Tier1 ‚â• 25, Tier2 ‚â• 15):\n  - RSI: ‚â§30=+10, ‚â§40=+7, ‚â§50=+3\n  - Bollinger position: ‚â§20=+10, ‚â§30=+7, ‚â§40=+3\n  - Volume ratio (vs 20‚Äëday avg): 1.5x=+3, 2.0x=+5, 3.0x=+7\n  - ATR% of price: 2‚Äì5%=+3, 1‚Äì6%=+1.5, else 0\n  - 5‚Äëday momentum: ‚àí2%..+1%=+2; ‚àí5%..+3%=+1\n\n- `calculate_basic_score_fast` (0‚Äì10):\n  - Adds RSI/BB/Volume/RR, and swing reversal (weighted 0.3). Clamped to [0,10].\n\n\n## Suggested Extraction Layout\n\n- `swing_screener/quality.py`\n  - `apply_adaptive_winsorization`, `get_robust_price_data`, `validate_winsorization_quality`, `align_to_nse_trading_calendar`\n\n- `swing_screener/indicators.py`\n  - `rsi14`, `bollinger_band_position`, `average_true_range`, `VectorizedIndicators`\n\n- `swing_screener/signals.py`\n  - `calculate_swing_reversal_signals_fast`, `calculate_swing_reversal_signals`, `generate_trading_signals`, `calculate_signal_confidence`\n\n- `swing_screener/scoring.py`\n  - `calculate_opportunity_score`, `calculate_basic_score_fast`\n\n- `swing_screener/screen.py`\n  - `process_ticker_data_complete`, `apply_quality_filters`, `screen_single_ticker_complete`, `batch_screen_tickers`\n\n- `swing_screener/data.py`\n  - `YFinanceDataValidator.safe_ticker_history`, `get_history_optimized`, `EnhancedCacheManager`, `sanitize`, `ensure_ns_suffix`\n\n- `swing_screener/entry.py`\n  - `EntryStrategy`\n\n\n## Minimal Usage Pattern\n\n1) For each ticker:\n- `df = process_ticker_data_complete(ticker, '1y')`\n- `if not apply_quality_filters(df, ticker): continue`\n- `signals = calculate_swing_reversal_signals_fast(df)` (optional)\n- `score = calculate_opportunity_score(df, ticker)`\n- Rank by `score['total_score']`, bucket by `score['tier']`\n\n2) For deployment (optional):\n- `sig = generate_trading_signals(df, ticker)` ‚Üí entry, SL=1.5√óATR, TP=3√óATR\n- Or use `EntryStrategy.tier1/tier2/tier3`\n\n\n## Function Reference Map\n\n- Data Access/Quality\n  - `YFinanceDataValidator.safe_ticker_history` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:1677\n  - `apply_adaptive_winsorization` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:1766\n  - `get_robust_price_data` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:1856\n  - `validate_winsorization_quality` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:1952\n  - `align_to_nse_trading_calendar` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2031\n  - `get_quality_safe_price_data` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2198\n  - `sanitize`, `ensure_ns_suffix` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:486, 500\n\n- Indicators\n  - `VectorizedIndicators.calculate_all_indicators` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:257\n  - `rsi14` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2708\n  - `bollinger_band_position` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2740\n  - `average_true_range` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2770\n\n- Screening/Scoring\n  - `process_ticker_data_complete` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2807\n  - `apply_quality_filters` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2453\n  - `calculate_opportunity_score` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2494\n  - `calculate_basic_score_fast` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3740\n  - `screen_single_ticker_complete` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2589\n  - `batch_screen_tickers` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:2665\n\n- Signals/Entry\n  - `calculate_swing_reversal_signals_fast` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3708\n  - `calculate_swing_reversal_signals` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:4820\n  - `generate_trading_signals` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3075\n  - `calculate_signal_confidence` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3155\n  - `EntryStrategy` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:9041\n\n- Performance\n  - `get_history_optimized` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3636\n  - `EnhancedCacheManager` ‚Äî swing_screener_v23_9o_full_TECH_plus_TECHOUT_check_methods.py:3544\n\n\n## Practical Notes\n\n- Liquidity guardrails: `apply_quality_filters` default avg volume ‚â• 300k, recent ‚â• 100k, price ‚â• ‚Çπ20, bars ‚â• 50.\n- Risk/Reward: Vectorized engine includes S/R and R/R; use it to prioritize entries.\n- India tickers: use raw symbols (e.g., `INFY`); `ensure_ns_suffix` adds `.NS` safely.\n- Start simple: use `calculate_opportunity_score` for ranking; layer swing reversal and R/R for priority.\n\n\n## Next Steps (Optional Enhancements)\n\n- Institutional aggregation: `calculate_color_score` for FII growth, catalysts, AVWAP, order flow (advanced ranking).\n- Fundamental/news tiers: `TierClassifier` (requires additional data sources).\n- Backtesting hooks and paper trading (integrations exist in the script).\n\n\n---\n\nIf you want, we can stub a `swing_screener/` package with this structure and a CLI that prints a ranked table using the components above.\n\n"
  }
}
